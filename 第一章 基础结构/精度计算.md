# 精度计算

## 围棋有多少种棋盘？
围棋为19*19的矩阵，每点放无、黑、白三种棋，所以总数上限是Z=3^(19*19)， 目测Z<9^200<E200, 非常大了。取对数表示,Z=3*9^(19*9)
lgZ=19*9*lg9+lg3
>注意，计算机中，lg指ln。

二分  不动点迭代法 梯度 牛顿法 
## 实现lga
高精度计算，大体上都是逼近真值，迭代缩小误差。
### 二分法
设x=lga，则10^x=a，追踪误差d(x)=10^x-a,使之最小。
易求得l，r使得d(l)*d(r)<0,不断更新l,r，使之误差满足精度。
```python
def lg_bi(a,p): #p为精度
    if a<=0:
        return -1
    def d(x):
        return 10^x-a
    l,r=1,1
    while d(l)>0:
        l-=1
    while d(r)<0:
        r+=1
    while abs(l,r)<p:
        m=(l+r)/2
        if d(m)>0:
            r=m
        else:
            l=m
    return l
```
## 梯度法
梯度是向量导数，梯度是函数在某点上升最快的方向。
lga=lna/ln10,求得lna即可。lnx梯度为1/x。梯度只知方向还需要设定步长step。如此我们比较迭代数函数值比真值大或小，来选择梯度或者负梯度。
```python
def lg_grad(a,p):
    #...
    while abs(l,r)<p:
        l=r
        step=abs(l,r)/5
        if d(l)<0:
            r+=step/l
        else:
            r-=step/l
```

泰勒展开f(x)=f(x0)+f'(x0)(x-x0)+f'
f(x)=f(x0)+f′(x0)(x−x0)+1/2*f′′(x0)(x−x0)^2+...+1/n!*fn(x0)(x−x0)^n

## 牛顿法求根
y=f(x0)+ f'(x0)*(x-x0)，令y=0求根,x=x0-f(x0)/f'(x0)。
>请实现
减去一阶，剩下误差

## 割线法
在牛顿法中，每一步都需要计算当前点的导数值，需要手动求导。如果不想人工求导，可以使用两点割线来代替切线，从而得到割线法，因此割线法又称分立牛顿法。
https://zhuanlan.zhihu.com/p/136823356

## 牛顿法最优化
设误差函数loss(x)=(10^x-10^a)^2/2,则极值点为根。f'(x)=f'(x0)+f''(x-x0)=0, 则x=x0-f'(x0)/f''(x0)。


